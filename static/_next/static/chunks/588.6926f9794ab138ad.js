"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588,686,847],{3588:function(e,t,n){n.r(t),n.d(t,{View:function(){return p}});var o=n(9634),u=n(4979),i=n(2985),c=n(5391);let isOrthographicCamera=e=>e&&e.isOrthographicCamera,s=new i.Color;function Container({canvasSize:e,scene:t,index:n,children:o,frames:i,rect:l,track:f}){let d=(0,c.z)(e=>e.get),v=(0,c.z)(e=>e.camera),p=(0,c.z)(e=>e.scene),g=(0,c.z)(e=>e.setEvents),m=0;return(0,c.A)(n=>{if(i===1/0||m<=i){var u;l.current=null==(u=f.current)?void 0:u.getBoundingClientRect(),m++}if(l.current){let{position:{left:u,bottom:i,width:c,height:f},isOffscreen:d}=function(e,t){let{right:n,top:o,left:u,bottom:i,width:c,height:s}=t,l=t.bottom<0||o>e.height||n<0||t.left>e.width;if("top"in e){let t=e.top+e.height,f=u-e.left;return{position:{width:c,height:s,left:f,top:o,bottom:t-i,right:n},isOffscreen:l}}let f=e.height-i;return{position:{width:c,height:s,top:o,left:u,bottom:f,right:n},isOffscreen:l}}(e,l.current),g=c/f;isOrthographicCamera(v)?(v.left!==-(c/2)||v.right!==c/2||v.top!==f/2||v.bottom!==-(f/2))&&(Object.assign(v,{left:-(c/2),right:c/2,top:f/2,bottom:-(f/2)}),v.updateProjectionMatrix()):v.aspect!==g&&(v.aspect=g,v.updateProjectionMatrix()),n.gl.setViewport(u,i,c,f),n.gl.setScissor(u,i,c,f),n.gl.setScissorTest(!0),d?(n.gl.getClearColor(s),n.gl.setClearColor(s,n.gl.getClearAlpha()),n.gl.clear(!0,!0)):n.gl.render(o?p:t,v),n.gl.setScissorTest(!0)}},n),u.useEffect(()=>{let e=d().events.connected;return g({connected:f.current}),()=>g({connected:e})},[]),u.useEffect(()=>{"top"in e||console.warn("Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.\n See https://github.com/pmndrs/drei/issues/944")},[]),u.createElement(u.Fragment,null,o)}let View=({track:e,index:t=1,frames:n=1/0,children:o})=>{var s,l;let f=u.useRef(null),{size:d,scene:v}=(0,c.z)(),[p]=u.useState(()=>new i.Scene),g=u.useCallback((t,n)=>{if(f.current&&e.current&&t.target===e.current){let{width:e,height:o,left:u,top:i}=f.current,c=t.clientX-u,s=t.clientY-i;n.pointer.set(c/e*2-1,-(2*(s/o))+1),n.raycaster.setFromCamera(n.pointer,n.camera)}},[f,e]),[m,h]=u.useReducer(()=>!0,!1);return u.useEffect(()=>{var t;f.current=null==(t=e.current)?void 0:t.getBoundingClientRect(),h()},[e]),u.createElement(u.Fragment,null,m&&(0,c.g)(u.createElement(Container,{canvasSize:d,frames:n,scene:v,track:e,rect:f,index:t},o,u.createElement("group",{onPointerOver:()=>null})),p,{events:{compute:g,priority:t},size:{width:null==(s=f.current)?void 0:s.width,height:null==(l=f.current)?void 0:l.height}}))};var l=n(9678),f=n(6465);let d=u.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:o,enableDamping:i=!0,keyEvents:s=!1,onChange:d,onStart:v,onEnd:p,...g},m)=>{let h=(0,c.z)(e=>e.invalidate),b=(0,c.z)(e=>e.camera),E=(0,c.z)(e=>e.gl),S=(0,c.z)(e=>e.events),w=(0,c.z)(e=>e.setEvents),y=(0,c.z)(e=>e.set),C=(0,c.z)(e=>e.get),z=(0,c.z)(e=>e.performance),j=t||b,x=o||S.connected||E.domElement,O=u.useMemo(()=>new f.zxs(j),[j]);return(0,c.A)(()=>{O.enabled&&O.update()},-1),u.useEffect(()=>(s&&O.connect(!0===s?x:s),O.connect(x),()=>void O.dispose()),[s,x,n,O,h]),u.useEffect(()=>{let callback=e=>{h(),n&&z.regress(),d&&d(e)},onStartCb=e=>{v&&v(e)},onEndCb=e=>{p&&p(e)};return O.addEventListener("change",callback),O.addEventListener("start",onStartCb),O.addEventListener("end",onEndCb),()=>{O.removeEventListener("start",onStartCb),O.removeEventListener("end",onEndCb),O.removeEventListener("change",callback)}},[d,v,p,O,h,w]),u.useEffect(()=>{if(e){let e=C().controls;return y({controls:O}),()=>y({controls:e})}},[e,O]),u.createElement("primitive",(0,l.Z)({ref:m,object:O,enableDamping:i},g))});var v=n(2528);let Three=e=>{let{children:t}=e;return(0,o.jsx)(v.v.In,{children:t})},p=(0,u.forwardRef)((e,t)=>{let{children:n,orbit:i,className:c,...s}=e,l=(0,u.useRef)(null);return(0,u.useImperativeHandle)(t,()=>l.current),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:l,...s,className:c}),(0,o.jsx)(Three,{children:(0,o.jsxs)(View,{track:l,children:[n,i&&(0,o.jsx)(d,{makeDefault:!0})]})})]})});p.displayName="View"},2528:function(e,t,n){n.d(t,{v:function(){return l}});var o,u,i=n(4979),c=n(3522);let s="undefined"!=typeof window&&(null!=(o=window.document)&&o.createElement||(null==(u=window.navigator)?void 0:u.product)==="ReactNative")?i.useLayoutEffect:i.useEffect,l=function(){let e=(0,c.Ue)(e=>({current:[],version:0,set:e}));return{In:({children:t})=>{let n=e(e=>e.set),o=e(e=>e.version);return s(()=>{n(e=>({version:e.version+1}))},[]),s(()=>(n(({current:e})=>({current:[...e,t]})),()=>n(({current:e})=>({current:e.filter(e=>e!==t)}))),[t,o]),null},Out:()=>{let t=e(e=>e.current);return i.createElement(i.Fragment,null,t)}}}()},8652:function(e,t,n){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=n(4979),u="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useState,c=o.useEffect,s=o.useLayoutEffect,l=o.useDebugValue;function r(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!u(e,n)}catch(e){return!0}}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),u=o[0].inst,f=o[1];return s(function(){u.value=n,u.getSnapshot=t,r(u)&&f({inst:u})},[e,n,t]),c(function(){return r(u)&&f({inst:u}),e(function(){r(u)&&f({inst:u})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:f},1973:function(e,t,n){/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=n(4979),u=n(3916),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=u.useSyncExternalStore,s=o.useRef,l=o.useEffect,f=o.useMemo,d=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,u){var v=s(null);if(null===v.current){var p={hasValue:!1,value:null};v.current=p}else p=v.current;var g=c(e,(v=f(function(){function a(t){if(!s){if(s=!0,e=t,t=o(t),void 0!==u&&p.hasValue){var n=p.value;if(u(n,t))return c=n}return c=t}if(n=c,i(e,t))return n;var l=o(t);return void 0!==u&&u(n,l)?n:(e=t,c=l)}var e,c,s=!1,l=void 0===n?null:n;return[function(){return a(t())},null===l?void 0:function(){return a(l())}]},[t,n,o,u]))[0],v[1]);return l(function(){p.hasValue=!0,p.value=g},[g]),d(g),g}},3916:function(e,t,n){e.exports=n(8652)},698:function(e,t,n){e.exports=n(1973)},3522:function(e,t,n){n.d(t,{Ue:function(){return create}});let createStoreImpl=e=>{let t;let n=new Set,setState=(e,o)=>{let u="function"==typeof e?e(t):e;if(!Object.is(u,t)){let e=t;t=(null!=o?o:"object"!=typeof u)?u:Object.assign({},t,u),n.forEach(n=>n(t,e))}},getState=()=>t,o={setState,getState,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(setState,getState,o),o},createStore=e=>e?createStoreImpl(e):createStoreImpl;var o=n(4979),u=n(698);let{useSyncExternalStoreWithSelector:i}=u,c=!1,createImpl=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?createStore(e):e,useBoundStore=(e,n)=>(function(e,t=e.getState,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let u=i(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return(0,o.useDebugValue)(u),u})(t,e,n);return Object.assign(useBoundStore,t),useBoundStore},create=e=>e?createImpl(e):createImpl}}]);