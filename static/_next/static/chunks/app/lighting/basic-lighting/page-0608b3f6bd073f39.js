(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{9071:function(e,n,i){Promise.resolve().then(i.bind(i,6781))},6781:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return LightingBasicPage}});var o=i(9634),r=i(8081),t=i(3563),l=i(8967),s=i(2403),u=i(4571),a=i(9039),c=i(748),f=i(4316),m=i(8590),h=i.n(m),v=i(4979),d=i(2905),g=i(4155),p=i(5391),x=i(3813),b=i(2985);function toColor(e){let n=e.replace(/^#/,""),i=parseInt(n,16);return new b.Color(i)}let C=(0,v.forwardRef)((e,n)=>{let{}=e,i=(0,v.useRef)(null),r=(0,v.useRef)(null),t=(0,v.useRef)(null),l=(0,x.M4)("Mesh Properties",{color:"#E9C46A"}),s=(0,x.M4)("Ambient Light",{enabled:!0,color:"#FFFFFF",intensity:{value:.3,min:0,max:1}}),u=(0,x.M4)("Diffuse Light",{enabled:!0,color:"#FFFFFF"}),a=(0,x.M4)("Specular Light",{enabled:!0,shininess:{value:32,min:2,max:256},intensity:{value:.5,min:0,max:1}}),c=(0,v.useMemo)(()=>{var e;return{uMeshColor:{value:toColor(l.color)},uCameraPosition:{value:null===(e=n.current)||void 0===e?void 0:e.position},uLightPosition:{value:[0,0,0]},uAmbient:{value:s.enabled},uAmbientIntensity:{value:s.intensity},uAmbientColor:{value:toColor(s.color)},uDiffuse:{value:u.enabled},uDiffuseColor:{value:toColor(u.color)},uSpecular:{value:a.enabled},uSpecularStrength:{value:a.intensity},uSpecularShininess:{value:a.shininess}}},[]);return(0,v.useEffect)(()=>{t.current.uniforms.uAmbient.value=s.enabled,t.current.uniforms.uAmbientIntensity.value=s.intensity,t.current.uniforms.uAmbientColor.value=toColor(s.color)},[s]),(0,v.useEffect)(()=>{t.current.uniforms.uDiffuse.value=u.enabled,t.current.uniforms.uDiffuseColor.value=toColor(u.color)},[u]),(0,v.useEffect)(()=>{t.current.uniforms.uSpecular.value=a.enabled,t.current.uniforms.uSpecularStrength.value=a.intensity,t.current.uniforms.uSpecularShininess.value=a.shininess},[a]),(0,v.useEffect)(()=>{t.current.uniforms.uMeshColor.value=toColor(l.color)},[l]),(0,p.A)(e=>{var o;t.current.uniforms.uCameraPosition.value=null===(o=n.current)||void 0===o?void 0:o.position,t.current.uniforms.uLightPosition.value=i.current.object.position}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.xu,{ref:r,args:[5,5,5],children:(0,o.jsx)("shaderMaterial",{ref:t,attach:"material",vertexShader:"\n\n// attribute vec3 position;\n// attribute vec3 normal;\n// attribute vec2 uv;\n\nvarying vec3 vNormal;\nvarying vec3 vFragPosition; \n\nvoid main() {\n  vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n  vec4 viewPosition = viewMatrix * modelPosition;\n  vec4 projectedPosition = projectionMatrix * viewPosition;\n\n  gl_Position = projectedPosition;\n  vFragPosition = vec3(modelPosition.xyz);\n  vNormal = normal;\n}\n\n",fragmentShader:"\nprecision mediump float;\n\nvarying vec3 vNormal;\nvarying vec3 vFragPosition; \n\nuniform vec3 uMeshColor;\nuniform vec3 uLightPosition;\nuniform vec3 uCameraPosition; \n\nuniform bool uAmbient;\nuniform vec3 uAmbientColor;\nuniform float uAmbientIntensity;\n\nuniform bool uDiffuse;\nuniform vec3 uDiffuseColor;\n\nuniform bool uSpecular;\nuniform float uSpecularStrength;\nuniform float uSpecularShininess;\n\nvoid main() {\n    vec3 ambient = uAmbientIntensity * uAmbientColor;\n    \n    vec3 norm = normalize(vNormal);\n    vec3 lightDir = normalize(uLightPosition - vFragPosition);  \n    float diff = max(dot(norm, lightDir), 0.0);\n    vec3 diffuse = diff * uDiffuseColor;\n\n    // specular\n    vec3 viewDir = normalize(uCameraPosition - vFragPosition);\n    vec3 reflectDir = reflect(-lightDir, norm);  \n    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uSpecularShininess);\n    vec3 specular = uSpecularStrength * spec * uDiffuseColor;  \n\n    vec3 lighting = vec3(0.0);\n    if (uAmbient) {\n        lighting += ambient;\n    }\n\n    if (uDiffuse) {\n        lighting += diffuse;\n    }\n\n    if (uSpecular) {\n        lighting += specular;\n    }\n    \n    vec3 result = lighting * uMeshColor;\n    gl_FragColor = vec4(result, 1.0);\n}\n",uniforms:c})}),(0,o.jsx)(g.Y,{position:[5,5,5],ref:i,mode:"translate",children:(0,o.jsx)(d.xu,{children:(0,o.jsx)("meshBasicMaterial",{color:toColor(u.color)})})})]})});C.displayName="AmbientCube";let j=h()(()=>i.e(588).then(i.bind(i,3588)).then(e=>e.View),{loadableGenerated:{webpack:()=>[3588]},ssr:!1,loading:()=>(0,o.jsx)(r.a,{})});function LightingBasicPage(){let e=(0,v.useRef)(),n=(0,v.useRef)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(v.Suspense,{fallback:null,children:[(0,o.jsx)("div",{className:"relative",ref:n}),(0,o.jsxs)(j,{className:"h-full w-full",index:0,track:n,orbit:!0,children:[(0,o.jsx)(C,{ref:e}),(0,o.jsx)(f.c,{ref:e,makeDefault:!0,position:[0,0,30],fov:60})]}),(0,o.jsx)("div",{className:"fixed left-0 top-10 z-10 w-screen pl-80",children:(0,o.jsxs)(t.x,{ml:"9",children:[(0,o.jsx)(l.X,{size:"8",weight:"light",mb:"2",children:"Basic Lighting"}),(0,o.jsxs)(s.x,{size:"4",weight:"light",children:["This example uses the ",(0,o.jsx)(u.c,{children:"Phong Illumination Model"})," which is an appromixation of how light interacts with a surface. ",(0,o.jsx)("br",{})," The model is based on the Phong reflection model which describes the way light reflects off a surface. ",(0,o.jsx)("br",{}),"The model is composed of three components: ambient, diffuse and specular."]}),(0,o.jsx)(l.X,{size:"4",weight:"light"})]})}),(0,o.jsx)("div",{className:"fixed bottom-10 left-0 z-10 w-screen pl-80",children:(0,o.jsx)(a.$,{p:"6",children:(0,o.jsx)(c.V,{children:"Explore the properties of light by playing around with the ambient, diffuse and specular properties."})})})]})})}},8081:function(e,n,i){"use strict";i.d(n,{a:function(){return Loader}});var o=i(9634);let Loader=()=>(0,o.jsx)("div",{className:"flex h-96 w-full flex-col items-center justify-center",children:(0,o.jsxs)("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-black",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}},function(e){e.O(0,[252,545,391,367,351,657,739,419,904,726,744],function(){return e(e.s=9071)}),_N_E=e.O()}]);